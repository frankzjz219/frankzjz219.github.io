<!DOCTYPE html>
<html lang="Chinese">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Frank·Zhang">
    
    <title>
        
            配置WSL2为桥接模式（原来是NAT模式） |
        
        Frank&#39;s Blogs
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/FLogo.png">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"frankzhang0219.gitee.io","root":"/","language":"Chinese"};
    KEEP.theme_config = {"toc":{"enable":false,"number":false,"expand_all":false,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/FLogo.png","favicon":"/images/FLogo.png","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":false,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":false,"preload":false},"code_copy":{"enable":false,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Frank&#39;s Blogs
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                    
                </ul>
            </div>
            <div class="mobile">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">配置WSL2为桥接模式（原来是NAT模式）</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/FLogo.png">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Frank·Zhang</span>
                        
                            <span class="author-label">Lv5</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-07-26 10:07:19</span>
        <span class="mobile">2022-07-26 10:07</span>
    </span>
    
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="配置WSL2为桥接模式（原来是NAT模式）"><a href="#配置WSL2为桥接模式（原来是NAT模式）" class="headerlink" title="配置WSL2为桥接模式（原来是NAT模式）"></a>配置WSL2为桥接模式（原来是NAT模式）</h1><ul>
<li><p>配置为<strong>桥接模式</strong>之后局域网中的设备就可以<strong>直接访问WSL</strong>，不需要借助电脑的端口转发</p>
</li>
<li><p>首先在命令行（具有<strong>管理员权限</strong>）中输入<code>Get-NetAdapter</code>，查看电脑的网卡情况（此时可能看不到WSL的虚拟网卡）</p>
</li>
<li><p><img src="/imgs/2a1e4199284bb6f34b17e59acd90a47457a8270692ad41ad95f55a44156d3789.png" alt="图 1">  </p>
</li>
<li><p>然后使用命令<code>Set-VMSwitch WSL -NetAdapterName &lt;桥接到的网卡名称&gt;</code>，将其中的尖括号部分替换为需要桥接到的网卡，比如<strong>WLAN</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-VMSwitch WSL -NetAdapterName WLAN</span><br></pre></td></tr></table></figure></li>
<li><p>然后再次使用<code>Get-NetAdapter</code>，输出如下</p>
</li>
<li><p><img src="/imgs/8ace140dd419539ff686b785950ad0bdf57c82012717a7bac6b33975b722d621.png" alt="图 2">  </p>
</li>
<li><p>可见增加了基于Hyper-V的WSL虚拟网卡</p>
</li>
<li><p>然后使用Windows的<code>ipconfig</code>查询计算机的网关等信息，同时在设置中查看计算机的DNS等信息，然后使用这些信息配置WSL的网络</p>
</li>
<li><p><img src="/imgs/10c4b7c405b29480c2d8b5b872eb6d84c2b5755f0cde537de5765af517962dcf.png" alt="图 4">  </p>
</li>
<li><p><img src="/imgs/90b8d5543f1531f630d77bea20a2c514681f8a4be4d7bd5f90f017df9811201e.png" alt="图 5">  </p>
</li>
<li><p>使用如下命令配置WSL的网络（WSL中）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ip addr del $(ip addr show eth0 | grep <span class="string">&#x27;inet\b&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | head -n 1) dev eth0</span><br><span class="line">sudo ip addr add &lt;需要设置的IP地址&gt;/24 broadcast &lt;局域网广播地址（一般是网络号.网络号.网络号.255）&gt; dev eth0</span><br><span class="line">sudo ip route add 0.0.0.0/0 via &lt;默认网关&gt; dev eth0</span><br></pre></td></tr></table></figure></li>
<li><p>然后WSL<code>ping</code>百度可以ping通</p>
</li>
<li><p><img src="/imgs/211a40fcd4e0364e16eff2edf904fa5feb73b3093a1105796ae967d2c1965262.png" alt="图 6">  </p>
</li>
<li><p>Windows<code>ping</code>WSL的IP也可以<code>ping</code>通</p>
</li>
<li><p><img src="/imgs/4742d27c3fd93d8907e7b0a501ac471f5c9876026ba066418a1faec43a047045.png" alt="图 7">  </p>
</li>
<li><p>参考链接 </p>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/488442403" >知乎<i class="fas fa-external-link-alt"></i></a> </li>
<li><a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/chubbykkk/article/details/125216708" >csdn<i class="fas fa-external-link-alt"></i></a><h2 id="更改WSL为桥接模式之后远程显示的问题"><a href="#更改WSL为桥接模式之后远程显示的问题" class="headerlink" title="更改WSL为桥接模式之后远程显示的问题"></a>更改WSL为桥接模式之后远程显示的问题</h2></li>
</ul>
</li>
<li><p>因为更改WSL为桥接模式之后，WSL变为局域网下与Windows平级的设备，所以需要重新配置<code>.bashrc</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>找到这一行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> DISPLAY=&lt;IP地址&gt;:0</span><br></pre></td></tr></table></figure></li>
<li><p>将这一行中尖括号的部分修改为<strong>计算机在局域网中的IP地址</strong>然后即可继续使用WSL桌面（比如<code>startxfce4</code>）</p>
</li>
<li><p><img src="/imgs/6ceb41155c3d371a919243c79169702e60f5b5bd66864aba5360198b3dc84a3d.png" alt="图 8">  </p>
</li>
</ul>

        </div>

        

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2022/07/27/%E9%85%8D%E7%BD%AE%E5%BC%80%E5%8F%91%E6%9D%BF%E9%80%9A%E8%BF%87%E7%BD%91%E7%BA%BF%E8%BF%9E%E6%8E%A5%E6%9C%AC%E6%9C%BAWSL%E8%99%9A%E6%8B%9F%E6%9C%BA/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">配置开发板通过网线连接本机WSL虚拟机</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2022/07/11/Linux%E4%B8%8B%E4%BD%BF%E7%94%A8epoll%E7%9A%84C%E8%AF%AD%E8%A8%80%E6%9C%8D%E5%8A%A1%E7%AB%AF/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Linux下使用epoll的C语言服务端</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2021</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Frank·Zhang</a>
        </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>








<div class="post-scripts">
    
</div>



</body>
</html>
